{% extends 'base.html' %}
{% load static %}

{% block content %}
<h1>üõçÔ∏è Tu Carrito de Paletas</h1>

{% if items %}
  <table class="tabla-carrito">
    <thead>
      <tr>
        <th>Sabor</th>
        <th>Tama√±o</th>
        <th>Cantidad</th>
        <th>Precio unitario</th>
        <th>Total</th>
      </tr>
    </thead>
    <tbody>
      {% for item in items %}
        <tr>
          <td>{{ item.sabor.nombre }}</td>
          <td>{{ item.tama√±o|capfirst }}</td>
          <td>{{ item.cantidad }}</td>
          <td>
            {% if item.tama√±o == "peque√±o" %}
              ${{ item.sabor.precio_pequeno }}
            {% else %}
              ${{ item.sabor.precio_grande }}
            {% endif %}
          </td>
          <td>
            {% if item.tama√±o == "peque√±o" %}
              ${{ item.sabor.precio_pequeno|floatformat:2|add:item.cantidad|floatformat:2 }}
            {% else %}
              ${{ item.sabor.precio_grande|floatformat:2|add:item.cantidad|floatformat:2 }}
            {% endif %}
          </td>
        </tr>
      {% endfor %}
    </tbody>
  </table>

  <div class="total-carrito">
    <strong>Total del pedido:</strong> ${{ total|floatformat:2 }}
  </div>

  <div class="acciones-carrito">
    <a href="{% url 'confirmar_pedido' %}" class="btn-confirmar">Confirmar pedido</a>
    <a href="{% url 'lista_sabores' %}" class="btn-seguir">Seguir comprando</a>
  </div>
{% else %}
  <p>Tu carrito est√° vac√≠o por ahora. üçß</p>
  <a href="{% url 'lista_sabores' %}" class="btn-seguir">Explorar sabores</a>
{% endif %}
{% endblock %}
